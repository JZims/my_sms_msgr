<h1>SMS Chat</h1>

<div class="messages">
  <div *ngFor="let message of messages">
    <p><strong>{{ message.phone_number }}</strong>: {{ message.message_body }} ({{ message.status }})</p>
  </div>
</div>

<div class="form">
  <div class="input-group">
    <input 
      type="text" 
      [(ngModel)]="phoneNumber" 
      (blur)="validatePhone()"
      placeholder="Phone number (e.g., +1234567890)"
      [class.error]="phoneError">
    <div *ngIf="phoneError" class="error-text">{{ phoneError }}</div>
  </div>
  
  <div class="input-group">
    <textarea 
      [(ngModel)]="messageBody"
      (input)="validateMessage()"
      placeholder="Type your message..."
      maxlength="250"
      [class.error]="messageError || isCharacterLimitExceeded()"></textarea>
    <div class="char-count" [class.over-limit]="isCharacterLimitExceeded()">
      {{ getCharacterCount() }}
    </div>
    <div *ngIf="messageError" class="error-text">{{ messageError }}</div>
  </div>
  
  <button 
    (click)="sendMessage()"
    [disabled]="!isFormValid() || isCharacterLimitExceeded()">
    Send
  </button>
</div>